/**
 * better-strint
 * v1.0.0
 * by Wei Zhixiang
 * https://github.com/lang1427/better-strint
 */

!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).BetterStrint=n()}(this,function(){"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var e=function(r){return!b(r)};function o(r){if(n(r,"number"),r<0)throw new Error("Expected a positive number: "+r)}function n(r,n){if(t(r)!==n)throw new Error("Not a "+n+": "+r)}function u(r){n(r,"string")}function l(r){u(r),function(r,n,t){if(!n.call(null,r))throw new Error("Condition "+t+" failed for value "+r)}(r,e,"isPositive")}function c(r){n(r,"number")}function i(r){return"0"===r?"0":b(r)?r.slice(1):"-"+r}function f(r,n){return l(r),o(n),w(r,n-r.length)}function a(r,n){return!(!b(r)||!e(n))||(!e(r)||!b(n))&&(b(r)&&b(n)?!x(p(r),p(n)):x(r,n))}function s(r,n){if(l(r),l(n),!E(r,n))throw new Error("x must be greater or equal to y");for(var t=Math.max(r.length,n.length),e="",o=0,u=0,i=0;i<t;i++){for(var f=Number(y(r,i))-o,o=0,c=Number(y(n,i));f<c;)f+=10,o++;var a=String(f-c);"0"!==a?(e=a+w(e,u),u=0):u++}return 0===e.length?"0":e}function g(r,n){if(l(r),l(n),A(r,n))return["1","0"];if(B(n,r))return["0",M(r)];for(var t="0",e=r.length-n.length;;){for(var o=r.slice(0,r.length-e);E(o,n);)o=I(o,n),t=N(t,"1");if(r=o+r.slice(r.length-e),B(n,r))return[t=T(t,e),M(r)];if(e--,t=T(t,1),e<0)throw new Error("Illegal state")}}function h(r,n){return e(r)===e(n)}function m(r,n){l(r),l(n);for(var t="0",e=d(n),o=0;o<e;o++)var u=$(r,Number(y(n,o))),u=T(u,o),t=S(t,u);return t}function v(r,n){u(r),u(n);var t=m(p(r),p(n));return h(r,n)?t:i(t)}var b=function(r){return u(r),0===r.indexOf("-")},p=function(r){return b(r)?i(r):r},d=function(r){return b(r)?r.length-1:r.length},y=function(r,n){return u(r),c(n),n>=d(r)?"0":r.charAt(r.length-n-1)},w=function(r,n){l(r),o(n);for(var t=r,e=0;e<n;e++)t="0"+t;return t},S=function(r,n){l(r),l(n);for(var t=Math.max(r.length,n.length),e="",o=0,u=0,i=0;i<t;i++){for(var f=Number(y(r,i))+Number(y(n,i))+o,o=0;10<=f;)f-=10,o++;0===f?u++:(e=String(f)+w(e,u),u=0)}return e=0<o?String(o)+e:e},x=function(r,n){if(b(r)||b(n))throw new Error("Both operands must be positive: "+r+" "+n);var t=Math.max(r.length,n.length);return f(r,t)<f(n,t)},E=function(r,n){return!a(r,n)},N=function(r,n){if(u(r),u(n),e(r)&&e(n))return S(r,n);if(b(r)&&b(n))return i(S(p(r),p(n)));var t;a(p(r),p(n))&&(t=r,r=n,n=t);n=s(p(r),p(n));return e(r)?n:i(n)},P=/^(-?)0*([1-9][0-9]*)$/,q=/^0+$/,M=function(r){if(q.test(r))return"0";var n=P.exec(r);if(!n)throw new Error("Illegal strint format: "+r);return n[1]+n[2]},A=function(r,n){return M(r)===M(n)},B=function(r,n){return!A(r,n)&&E(r,n)},I=function(r,n){return u(r),u(n),N(r,i(n))},T=function(r,n){for(;0<n;)r+="0",n--;return r},$=function(r,n){l(r),c(n);for(var t="",e=d(r),o=0,u=0,i=0;i<e;i++){for(var f=Number(y(r,i))*n+o,o=0;10<=f;)f-=10,o++;0===f?u++:(t=String(f)+w(t,u),u=0)}return 0===(t=0<o?String(o)+t:t).length?"0":t};return{abs:p,add:N,div:function(r,n){u(r),u(n);var t=g(p(r),p(n))[0];return h(r,n)?t:i(t)},eq:A,ge:E,gt:B,isNegative:b,isPositive:e,lt:a,mul:v,mulPositive:m,negate:i,normalize:M,pow:function(r,n){if(n<0)throw"pow function not support negative number";if(0==n)return 1;if(1==n)return r;if(2==n)return v(r,r);for(var t=v(r,r),e="",o=3;o<=n;o++)t=e=v(t,r);return e},quotientRemainderPositive:g,sub:I,subPositive:s,sum:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce(function(r,n){return N(r,n)})},timesDigit:$}});
