/**
 * better-strint
 * v1.0.0
 * by Wei Zhixiang
 * https://github.com/lang1427/better-strint
 */

!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).BetterStrint=n()}(this,function(){"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var e=function(r){return!m(r)};function o(r){if(n(r,"number"),r<0)throw new Error("Expected a positive number: "+r)}function n(r,n){if(t(r)!==n)throw new Error("Not a "+n+": "+r)}function i(r){n(r,"string")}function c(r){i(r),function(r,n,t){if(!n.call(null,r))throw new Error("Condition "+t+" failed for value "+r)}(r,e,"isPositive")}function l(r){n(r,"number")}function u(r){return"0"===r?"0":m(r)?r.slice(1):"-"+r}function f(r,n){c(r),c(n);for(var t=Math.max(r.length,n.length),e="",o=0,i=0,u=0;u<t;u++){for(var f=Number(d(r,u))+Number(d(n,u))+o,o=0;10<=f;)f-=10,o++;0===f?i++:(e=String(f)+y(e,i),i=0)}return e=0<o?String(o)+e:e}function a(r,n){return c(r),o(n),y(r,n-r.length)}function s(r,n){return!(!m(r)||!e(n))||(!e(r)||!m(n))&&(m(r)&&m(n)?!w(b(r),b(n)):w(r,n))}function h(r,n){if(c(r),c(n),!S(r,n))throw new Error("x must be greater or equal to y");for(var t=Math.max(r.length,n.length),e="",o=0,i=0,u=0;u<t;u++){for(var f=Number(d(r,u))-o,o=0,l=Number(d(n,u));f<l;)f+=10,o++;var a=String(f-l);"0"!==a?(e=a+y(e,i),i=0):i++}return 0===e.length?"0":e}function g(r,n){if(c(r),c(n),P(r,n))return["1","0"];if(q(n,r))return["0",I(r)];for(var t="0",e=r.length-n.length;;){for(var o=r.slice(0,r.length-e);S(o,n);)o=M(o,n),t=x(t,"1");if(r=o+r.slice(r.length-e),q(n,r))return[t=j(t,e),I(r)];if(e--,t=j(t,1),e<0)throw new Error("Illegal state")}}function v(r,n){var t=[];r+="",n+="";for(var e,o,i=[],u=[];""!==r;)i.unshift(parseInt(r.substr(-4))),r=r.slice(0,-4);for(;""!==n;)u.unshift(parseInt(n.substr(-4))),n=n.slice(0,-4);for(var f=0;f<i.length;f++)for(var l=0;l<u.length;l++)o=0,i[f]&&u[l]&&(o=i[f]*u[l]),t[e=f+l]?t[e]+=o:t[e]=o;for(var a=t.length-1;0<a;a--)for(t[a]+="",4<t[a].length&&(t[a-1]+=parseInt(t[a].slice(0,-4)),t[a]=t[a].substr(-4));t[a].length<4;)t[a]="0"+t[a];return t=t[0]?t.join(""):"0"}var m=function(r){return i(r),0===r.indexOf("-")},b=function(r){return m(r)?u(r):r},p=function(r){return m(r)?r.length-1:r.length},d=function(r,n){return i(r),l(n),n>=p(r)?"0":r.charAt(r.length-n-1)},y=function(r,n){c(r),o(n);for(var t=r,e=0;e<n;e++)t="0"+t;return t},w=function(r,n){if(m(r)||m(n))throw new Error("Both operands must be positive: "+r+" "+n);var t=Math.max(r.length,n.length);return a(r,t)<a(n,t)},S=function(r,n){return!s(r,n)},x=function(r,n){if(i(r),i(n),e(r)&&e(n))return f(r,n);if(m(r)&&m(n))return u(f(b(r),b(n)));var t;s(b(r),b(n))&&(t=r,r=n,n=t);n=h(b(r),b(n));return e(r)?n:u(n)},E=/^(-?)0*([1-9][0-9]*)$/,N=/^0+$/,I=function(r){if(N.test(r))return"0";var n=E.exec(r);if(!n)throw new Error("Illegal strint format: "+r);return n[1]+n[2]},P=function(r,n){return I(r)===I(n)},q=function(r,n){return!P(r,n)&&S(r,n)},M=function(r,n){return i(r),i(n),x(r,u(n))},j=function(r,n){for(;0<n;)r+="0",n--;return r};return{abs:b,add:x,div:function(r,n){i(r),i(n);var t=g(b(r),b(n))[0];return n=n,e(r)===e(n)?t:u(t)},eq:P,ge:S,gt:q,isNegative:m,isPositive:e,lt:s,negate:u,normalize:I,pow:function(r,n){if(n<0)throw"pow function not support negative number";if(0==n)return 1;if(1==n)return r;if(2==n)return v(r,r);for(var t=v(r,r),e="",o=3;o<=n;o++)t=e=v(t,r);return e},quotientRemainderPositive:g,sub:M,subPositive:h,sum:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce(function(r,n){return x(r,n)})},timesDigit:function(r,n){c(r),l(n);for(var t="",e=p(r),o=0,i=0,u=0;u<e;u++){for(var f=Number(d(r,u))*n+o,o=0;10<=f;)f-=10,o++;0===f?i++:(t=String(f)+y(t,i),i=0)}return 0===(t=0<o?String(o)+t:t).length?"0":t},multiply:v}});
